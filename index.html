<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Opticka: Opticka Vision Experiment Generator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="opticka.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Opticka
   &#160;<span id="projectnumber">1.16</span>
   </div>
   <div id="projectbrief">Opticka is a vision research system for behavioral electrophysiology.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Opticka Vision Experiment Generator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://doi.org/10.5281/zenodo.592253"><object type="image/svg+xml" data="https://zenodo.org/badge/DOI/10.5281/zenodo.12293.svg" style="pointer-events: none;">DOI</object></a> <br  />
</p>
<p>Opticka is an object oriented framework with optional GUI for the <a href="http://psychtoolbox.org/wikka.php?wakka=HomePage">Psychophysics toolbox (PTB)</a>, allowing randomised interleaved presentation of complex visual stimuli. It is designed to work on macOS, Linux, or Windows and interfaces via strobed words (using either a <a href="https://www.crsltd.com/tools-for-vision-science/calibrated-displays/displaypp-lcd-monitor/">Display++</a>, <a href="http://vpixx.com/products/tools-for-vision-sciences/">DataPixx/ViewPixx</a> or a <a href="https://labjack.com/">LabJack</a>) and ethernet for recording neurophysiological and behavioural data. Behavioural control uses the Eyelink eye tracker and a full behavioural repertoire is available by using a <a href="http://iandol.github.io/OptickaDocs/classstate_machine.html#details">Finite State-Machine</a> controller. Opticka uses the TCP interface to the Eyelink affording much better control, reliability and data recording over using analog voltages alone. The various base classes can be used without the need to run the GUI (see <a href="http://iandol.github.io/OptickaDocs/optickatest.html">optickatest.m</a> for an example), and plug-n-play stimuli provide a unified interface (setup, animate, draw, update, reset) to integrate into existing/other PTB routines. The various object methods take care of all the background geometry and normalization, meaning stimuli are much easier to use than “raw” PTB. Analysis routines are also present for taking the raw Plexon files (.PL2 or .PLX), Eyelink files (.EDF) and behavioural responses and parsing them into a consistent structure, interfacing directly with <a href="http://fieldtrip.fcdonders.nl/start">Fieldtrip</a> for further spike, LFP, and spike-LFP analysis. The data structures allow the use of Jonathan Victor's <a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2818590/">STA toolkit</a>, and <a href="http://www.neurostat.mit.edu/nstat/">nStat toolbox</a> (a pp-GLM modelling approach to analysing neural data). Opticka affords much better graphics control and is far more modular than <a href="http://www.brown.edu/Research/monkeylogic/">MonkeyLogic</a>. <br  />
</p>
<p><img src="https://github.com/iandol/opticka/raw/gh-pages/images/opticka.png" alt="Opticka Screenshot" class="inline"/> <br  />
</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Example hardware setup</h1>
<p><img src="https://github.com/iandol/opticka/raw/gh-pages/images/Opticka-Setup.png" alt="Example hardware setup to run Opticka" class="inline"/></p>
<p>We have also recently got Opticka working well via the <a href="https://www.crsltd.com/tools-for-vision-science/calibrated-displays/displaypp-lcd-monitor/">Display++ developed by CRS</a>. This means we now support both the VPixx and CRS display replacements for vision research, affording great bit depth display output and using their built-in I/O for more robust and temporally precise experimental control.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Quick Documentation</h1>
<p><code><a class="el" href="optickatest_8m.html">optickatest.m</a></code> is a self-documenting minimal toy example showing a mini method of constants (MOC) experiment with 10 different stimuli. Read the Matlab-generated documentation for <code><a class="el" href="optickatest_8m.html">optickatest.m</a></code> here: <a href="http://iandol.github.io/OptickaDocs/optickatest.html">optickatest.m Report</a>. There is also auto-generated class documentation here: <a href="http://iandol.github.io/OptickaDocs/inherits.html">Opticka Class Docs</a>, however this is only as good as the comments in the code, which as always could be improved... <br  />
</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Install Instructions</h1>
<p>Opticka prefers the latest Psychophysics Toolbox (V3.0.14+) and at least Matlab 2017a (it uses object-oriented property validation introduced in that version). It has been tested and is mostly used on 64bit Ubuntu 18.04 &amp; macOS 10.14.x with Matlab 2018b. You can simply download the .ZIP from Github, and add the contents/subdirectories to Matlab path. Or if you have git installed, clone this Github repo and add to Matlab path.</p>
<p>Opticka currently works on Linux, macOS and Windows, though the LabJack interface currently only works under Linux and macOS (Labjack uses a different interface on windows and *nix, but this is a minor interface issue and would be a quick fix). Linux is by far the preferred OS according the PTB developer Mario Kleiner, and recieves the majority of development work, therefore it is strongly advised to use it for experiments.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Features</h2>
<ul>
<li>Values are always given in eye-relevant co-ordinates (degrees etc.) that are internally calculated based on screen geometry/distance</li>
<li>No limit on the number of independent variables, and variables can be linked to multiple stimuli.</li>
<li>A state machine logic can run behavioural tasks driven by for e.g. eye position or behavioural response. State machines can flexibly run tasks and chains of states define your experimental loop.</li>
<li>Number of heterogeneous stimuli displayed simultaneously only limited by the GPU / computer power.</li>
<li>Display lists are used, so one can easily change drawing order (i.e. what stimulus draws over other stimuli), by changing its order on the list.</li>
<li>Object Oriented, allowing stimulus classes to be easily added and code to autodocument using DOxygen.</li>
<li>The set of stimuli and variables can be saved into protocol files, to easily run successive protocols quickly.</li>
<li>Fairly comprehensive control of the PTB interface to the drawing hardware, like blending mode, bit depth, windowing, verbosity.</li>
<li>Colour is defined in floating point format, takes advantage of higher bit depths in newer graphics cards when available. The buffer can be defined from 8-32bits, use full alpha blending within that space and enable a &gt;8bit output using pseudogrey bitstealing techniques.</li>
<li>Sub-pixel precision (1/256th pixel) for movement and positioning.</li>
<li>TTL output to data acquisition and other devices. Currently uses DataPixx or LabJack to interface to the Plexon Omniplex using strobed words.</li>
<li>Can talk to other machines on the network during display using TCP/UDP (used to control a Plexon online display, so one can see PSTHs for each stimulus variable shown in real time).</li>
<li>Each stimulus has its own relative X &amp; Y position, and the screen centre can be arbitrarily moved via the GUI. This allows quick setup over particular parts of visual space, i.e. relative to a receptive field without needing to edit lots of other values.</li>
<li>Can record stimuli to video files.</li>
<li>Manages monitor calibration using ColorCalII from CRG or an i1Pro from ViewPixx. Calibration sets can be saved and loaded easily via the GUI.</li>
<li>Gratings (all using procedural textures for high performance):<ul>
<li>Per-frame update of properties for arbitrary numbers of grating patches.</li>
<li>Rectangular or circular aperture.</li>
<li>Cosine or hermite interpolation for filtering grating edges.</li>
<li>Square wave gratings, also using a procedural texture, i.e. very fast.</li>
<li>Gabors</li>
</ul>
</li>
<li>Coherent dot stimuli, coherence expressed from 0-1. Either square or round dots. Colours can be simple, random, random luminance or binary. Kill rates allow random replacement rates for dots. Circularly smoothed masked aperture option. Newsroom style dots with motion distributions etc.</li>
<li>Bars, either solid colour or random noise texture. Bars can be animated, direction can be independent of their angle.</li>
<li>Flashing/pulsing spots.</li>
<li>Pictures/Images that can drift and rotate.</li>
<li>Hand-mapping module - use mouse controlled dynamic bar / texture / colour to handmap receptive fields; includes logging of clicked position and later printout / storage of hand maps. These maps are in screen co-ordinates for quick subsequent stimulus placement. <br  />
 </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 8 2020 23:08:36 for Opticka by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
